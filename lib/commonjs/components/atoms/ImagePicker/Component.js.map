{"version":3,"sources":["Component.tsx"],"names":["LauncherTypeKind","ERROR_COLOR","CAMERA_KIND","kind","CAMERA","icon","label","IMAGE_LIBRARY_KIND","IMAGE_LIBRARY","sharedStyleSheet","StyleSheet","create","size","width","height","appearance","backgroundColor","borderWidth","borderColor","styleSheet","placeholder","flatten","justifyContent","placeholderIcon","alignSelf","imageWrapper","image","resizeMode","bottomSheetItem","paddingLeft","paddingRight","paddingTop","paddingBottom","display","flexDirection","alignItems","bottomSheetItemText","marginLeft","header","paddingVertical","borderTopLeftRadius","borderTopRightRadius","panelHandle","borderRadius","content","errorMessage","color","marginTop","ImagePickerPlaceholder","React","forwardRef","ref","style","props","undefined","IconType","AntDesign","ImagePickerImage","uri","ErrorMessage","BottomSheet","sheetRef","pickerData","triggerLaunch","handleSheetChange","renderHandle","renderItem","item","MaterialIcons","ImagePicker","launcherType","DEFAULT","value","onChange","onBlur","options","isPreview","snapPosition","setSnapPosition","index","mergedOptions","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","base64","getPickerData","pickImage","mediaLibraryPermissionsResult","granted","imagePickerResult","cancelled","current","snapTo","error","console","log","takeImage","cameraPermissionsResult","type","handleBlur","event"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useMemo } from \"react\";\nimport { StyleSheet, View, ViewProps, NativeSyntheticEvent, TargetedEvent } from \"react-native\";\nimport deepmerge from \"deepmerge\";\nimport { Icon, IconType, Image, Text } from \"../../../index\";\nimport {\n  ImageInfo,\n  ImagePickerOptions,\n  ImagePickerResult,\n  launchCameraAsync,\n  launchImageLibraryAsync,\n  MediaTypeOptions,\n  requestCameraPermissionsAsync,\n  requestMediaLibraryPermissionsAsync,\n} from \"expo-image-picker\";\nimport ScrollBottomSheet from \"react-native-scroll-bottom-sheet\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\n\n// type LauncherTypeKind = 'default' | 'camera' | 'image-library';\nexport enum LauncherTypeKind {\n  DEFAULT = \"default\",\n  CAMERA = \"camera\",\n  IMAGE_LIBRARY = \"image-library\",\n}\n\ninterface PickerData {\n  kind: LauncherTypeKind;\n  icon: string;\n  label: string;\n}\n\ninterface ErrorMessageProps {\n  errorMessage?: string;\n}\n\ninterface ImagePickerPlaceholderProps extends ErrorMessageProps, ViewProps {}\n\ninterface ImagePickerImageProps extends ErrorMessageProps, ViewProps {\n  uri: string;\n}\n\ninterface SheetRefProps {\n  sheetRef: React.RefObject<ScrollBottomSheet<PickerData>>;\n}\n\ninterface BottomSheetProps extends SheetRefProps {\n  pickerData: PickerData[];\n  triggerLaunch: (type: LauncherTypeKind) => void;\n  handleSheetChange: (index: number) => void;\n}\n\nconst ERROR_COLOR = \"#dc2626\";\n\nconst CAMERA_KIND: PickerData = {\n  kind: LauncherTypeKind.CAMERA,\n  icon: \"camera\",\n  label: \"Open Camera\",\n};\nconst IMAGE_LIBRARY_KIND: PickerData = {\n  kind: LauncherTypeKind.IMAGE_LIBRARY,\n  icon: \"image-search\",\n  label: \"Select from Gallery\",\n};\n\nconst sharedStyleSheet = StyleSheet.create({\n  size: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  appearance: {\n    backgroundColor: \"#e2e8f0\",\n    borderWidth: 3,\n    borderColor: \"#94a3b8\",\n  },\n});\n\nconst styleSheet = StyleSheet.create({\n  placeholder: StyleSheet.flatten([\n    sharedStyleSheet.size,\n    sharedStyleSheet.appearance,\n    { justifyContent: \"center\" },\n  ]),\n  placeholderIcon: {\n    alignSelf: \"center\",\n  },\n  imageWrapper: StyleSheet.flatten([sharedStyleSheet.appearance]),\n  image: StyleSheet.flatten([sharedStyleSheet.size, { resizeMode: \"contain\" }]),\n  bottomSheetItem: {\n    paddingLeft: 24,\n    paddingRight: 24,\n    paddingTop: 12,\n    paddingBottom: 12,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  bottomSheetItemText: {\n    marginLeft: 24,\n  },\n  header: {\n    alignItems: \"center\",\n    backgroundColor: \"white\",\n    paddingVertical: 20,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n  },\n  panelHandle: {\n    width: 40,\n    height: 2,\n    backgroundColor: \"rgba(0,0,0,0.3)\",\n    borderRadius: 4,\n  },\n  content: {\n    backgroundColor: \"#fff\",\n  },\n  errorMessage: {\n    color: ERROR_COLOR,\n    marginTop: 5,\n  },\n});\n\nconst ImagePickerPlaceholder = React.forwardRef<View, ImagePickerPlaceholderProps>(\n  ({ errorMessage, style, ...props }, ref) => (\n    <View\n      {...props}\n      ref={ref}\n      style={StyleSheet.flatten([\n        styleSheet.placeholder,\n        style,\n        errorMessage ? { borderColor: ERROR_COLOR } : undefined,\n      ])}\n    >\n      <Icon\n        style={styleSheet.placeholderIcon}\n        type={IconType.AntDesign}\n        name=\"camerao\"\n        size={36}\n        color={errorMessage ? ERROR_COLOR : undefined}\n      />\n    </View>\n  )\n);\n\nconst ImagePickerImage = React.forwardRef<View, ImagePickerImageProps>(\n  ({ uri, errorMessage, style, ...props }, ref) => (\n    <View\n      {...props}\n      ref={ref}\n      style={StyleSheet.flatten([\n        styleSheet.imageWrapper,\n        style,\n        errorMessage ? { borderColor: ERROR_COLOR } : undefined,\n      ])}\n    >\n      <Image source={{ uri }} style={styleSheet.image} />\n    </View>\n  )\n);\n\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({ errorMessage }) => (\n  <Text style={styleSheet.errorMessage}>{errorMessage}</Text>\n);\n\nconst BottomSheet: React.FC<BottomSheetProps> = ({\n  sheetRef,\n  pickerData,\n  triggerLaunch,\n  handleSheetChange,\n}) => {\n  const renderHandle = () => (\n    <View style={styleSheet.header}>\n      <View style={styleSheet.panelHandle} />\n    </View>\n  );\n\n  const renderItem = ({ item }: { item: PickerData }) => (\n    <TouchableOpacity onPress={() => triggerLaunch(item.kind)}>\n      <View style={styleSheet.bottomSheetItem}>\n        <Icon type={IconType.MaterialIcons} name={item.icon} size={24} />\n        <Text style={styleSheet.bottomSheetItemText}>{item.label}</Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  return (\n    <ScrollBottomSheet\n      ref={sheetRef}\n      componentType=\"FlatList\"\n      snapPoints={[\"70%\", \"100%\"]}\n      data={pickerData}\n      scrollEnabled={false}\n      initialSnapIndex={1}\n      keyExtractor={(item) => item.kind}\n      renderHandle={renderHandle}\n      onSettle={handleSheetChange}\n      contentContainerStyle={styleSheet.content}\n      renderItem={renderItem}\n    />\n  );\n};\n\nexport interface ImagePickerProps extends ViewProps {\n  launcherType?: LauncherTypeKind;\n  options?: ImagePickerOptions;\n  errorMessage?: string;\n  value?: ImagePickerResult | string | undefined;\n  onChange?: (imagePickerResult: ImagePickerResult) => void;\n  onBlur?: (event: NativeSyntheticEvent<TargetedEvent>) => void;\n  isPreview?: boolean;\n}\n\nconst ImagePicker = React.forwardRef<View, ImagePickerProps>(\n  (\n    {\n      launcherType = LauncherTypeKind.DEFAULT,\n      value,\n      onChange,\n      onBlur,\n      errorMessage,\n      options,\n      style,\n      isPreview,\n      ...props\n    },\n    ref\n  ) => {\n    const [snapPosition, setSnapPosition] = useState<number>(1);\n    const sheetRef = useRef<ScrollBottomSheet<PickerData>>(null);\n    const handleSheetChange = (index: number) => {\n      setSnapPosition(index);\n    };\n    const mergedOptions = useMemo<ImagePickerOptions>(\n      () =>\n        deepmerge<ImagePickerOptions, ImagePickerOptions>(options || ({} as ImagePickerOptions), {\n          mediaTypes: MediaTypeOptions.Images,\n          allowsEditing: true,\n          aspect: [4, 3],\n          quality: 1,\n          base64: true,\n        } as ImagePickerOptions),\n      [options]\n    );\n    const getPickerData = () => {\n      switch (launcherType) {\n        case \"camera\":\n          return [CAMERA_KIND];\n        case \"image-library\":\n          return [IMAGE_LIBRARY_KIND];\n        default:\n          return [CAMERA_KIND, IMAGE_LIBRARY_KIND];\n      }\n    };\n\n    const pickImage = async () => {\n      try {\n        const mediaLibraryPermissionsResult = await requestMediaLibraryPermissionsAsync();\n\n        if (mediaLibraryPermissionsResult.granted) {\n          const imagePickerResult = await launchImageLibraryAsync(mergedOptions);\n\n          if (!imagePickerResult.cancelled) {\n            onChange && onChange(imagePickerResult);\n            sheetRef.current?.snapTo(1);\n          }\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    const takeImage = async () => {\n      try {\n        const cameraPermissionsResult = await requestCameraPermissionsAsync();\n\n        if (cameraPermissionsResult.granted) {\n          const imagePickerResult = await launchCameraAsync(mergedOptions);\n\n          if (!imagePickerResult.cancelled) {\n            onChange(imagePickerResult);\n            sheetRef.current?.snapTo(1);\n          }\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    const triggerLaunch = async (type: LauncherTypeKind) => {\n      if (isPreview) return;\n\n      switch (type) {\n        case LauncherTypeKind.CAMERA:\n          await takeImage();\n          break;\n        case LauncherTypeKind.IMAGE_LIBRARY:\n          await pickImage();\n          break;\n        default:\n          sheetRef.current?.snapTo(0);\n          break;\n      }\n    };\n\n    const handleBlur: (event: NativeSyntheticEvent<TargetedEvent>) => void = (event) => {\n      onBlur && onBlur(event);\n    };\n\n    return (\n      <View style={styleSheet.content}>\n        <TouchableOpacity onPress={() => triggerLaunch(launcherType)} onBlur={handleBlur}>\n          {value ? (\n            <ImagePickerImage\n              {...props}\n              ref={ref}\n              style={style}\n              uri={typeof value === \"string\" ? value : (value as ImageInfo).uri}\n              errorMessage={errorMessage}\n            />\n          ) : (\n            <ImagePickerPlaceholder\n              {...props}\n              ref={ref}\n              style={style}\n              errorMessage={errorMessage}\n            />\n          )}\n        </TouchableOpacity>\n        {errorMessage ? <ErrorMessage errorMessage={errorMessage} /> : undefined}\n        <BottomSheet\n          sheetRef={sheetRef}\n          pickerData={getPickerData()}\n          triggerLaunch={triggerLaunch}\n          handleSheetChange={handleSheetChange}\n        />\n      </View>\n    );\n  }\n);\n\nexport default ImagePicker;\n"]}