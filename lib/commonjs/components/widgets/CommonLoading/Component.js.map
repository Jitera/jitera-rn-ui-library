{"version":3,"sources":["Component.tsx"],"names":["width","Dimensions","get","instanceLoadingComponent","DEFAULT_STATES","title","isShow","overlayProps","overlayStyles","showLoadingIcon","animationIconOnly","CommonLoadingComponent","React","Component","animation","Animated","Value","componentDidMount","componentWillUnmount","onProcess","state","getAnimationStyle","value","interpolate","inputRange","outputRange","valueFade","opacity","transform","scale","runAnimation","options","callback","duration","fromValue","toValue","setValue","timing","useNativeDriver","easing","Easing","elastic","start","show","animations","setState","hide","renderBackground","styles","overlay","render","theme","loadingColor","loadingSize","props","background","loading_bar_container","image","loading_text","StyleSheet","create","top","left","zIndex","height","overflow","position","flexDirection","alignSelf","backgroundColor","container","flex","loading","color","display","justifyContent","alignItems","marginBottom","text_container","blur","textAlign","paddingHorizontal"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  View,\n  Easing,\n  Animated,\n  StyleSheet,\n  Dimensions,\n  ActivityIndicator,\n} from 'react-native';\nimport Text from '../../atoms/Text/ThemedComponent';\nimport type { ThemeProps } from '../../../theme';\n\nconst { width } = Dimensions.get('window');\n\nlet instanceLoadingComponent: any = null;\nconst DEFAULT_STATES = {\n  title: '',\n  isShow: false,\n  overlayProps: {},\n  overlayStyles: {},\n  showLoadingIcon: true,\n  animationIconOnly: false,\n};\n\nexport type CommonLoadingProps = {\n  loadingSize?: 'small' | 'large';\n  loadingColor?: string;\n};\ntype CommonLoadingState = {\n  animation: Animated.Value;\n  title: string;\n  isShow: boolean;\n  overlayProps: any;\n  overlayStyles: any;\n  showLoadingIcon: boolean;\n  animationIconOnly: boolean;\n};\n\nexport class CommonLoadingComponent extends React.Component<\n  CommonLoadingProps & Partial<ThemeProps<CommonLoadingProps>>,\n  CommonLoadingState\n> {\n  static displayName = 'CommonLoading';\n\n  public static defaultProps = {\n    loadingSize: 'large',\n  };\n\n  state = {\n    animation: new Animated.Value(1),\n    ...DEFAULT_STATES,\n  };\n\n  componentDidMount() {\n    instanceLoadingComponent = this;\n  }\n\n  componentWillUnmount() {\n    instanceLoadingComponent = null;\n  }\n\n  onProcess() {\n    const { isShow } = this.state;\n    return isShow;\n  }\n\n  getAnimationStyle() {\n    const { animation } = this.state;\n    const value = animation.interpolate({\n      inputRange: [0, 1],\n      outputRange: [0.6, 1],\n    });\n    const valueFade = animation.interpolate({\n      inputRange: [0, 1],\n      outputRange: [0, 1],\n    });\n    return {\n      opacity: valueFade,\n      transform: [\n        {\n          scale: value,\n        },\n      ],\n    };\n  }\n\n  runAnimation(options: any, callback?: Animated.EndCallback) {\n    const { animation } = this.state;\n    const { duration, fromValue, toValue } = options;\n    animation.setValue(fromValue || 0);\n    return Animated.timing(animation, {\n      toValue: toValue || 1,\n      useNativeDriver: true,\n      duration: duration || 150,\n      easing: Easing.elastic(1),\n    }).start(callback);\n  }\n\n  show({\n    showLoadingIcon = true,\n    overlayProps = {},\n    overlayStyles = {},\n    animation = true,\n    animations = {},\n    animationIconOnly = true,\n    title = '',\n  }) {\n    this.setState(\n      {\n        title,\n        isShow: true,\n        overlayProps,\n        overlayStyles,\n        showLoadingIcon,\n        animationIconOnly,\n      },\n      () => {\n        if (animation) {\n          this.runAnimation(animations);\n        }\n      }\n    );\n  }\n\n  hide() {\n    const { animation } = this.state;\n    animation.setValue(0);\n    this.setState({\n      ...DEFAULT_STATES,\n    });\n  }\n\n  renderBackground() {\n    const { isShow, overlayStyles, overlayProps } = this.state;\n\n    return isShow ? (\n      <View style={[styles.overlay, overlayStyles]} {...overlayProps} />\n    ) : null;\n  }\n\n  render() {\n    const { title, isShow, showLoadingIcon, animationIconOnly } = this.state;\n    const { theme, loadingColor, loadingSize } = this.props;\n    if (!isShow) {\n      return null;\n    }\n    return (\n      <Animated.View\n        style={[\n          styles.background,\n          !animationIconOnly ? this.getAnimationStyle() : {},\n        ]}\n      >\n        {this.renderBackground()}\n        <View style={styles.loading_bar_container}>\n          {showLoadingIcon ? (\n            <Animated.View\n              style={[\n                styles.image,\n                animationIconOnly ? this.getAnimationStyle() : {},\n              ]}\n            >\n              <ActivityIndicator\n                color={loadingColor}\n                style={styles.image}\n                size={loadingSize}\n              />\n            </Animated.View>\n          ) : null}\n          {title ? (\n            <Text theme={theme} style={styles.loading_text}>\n              {title}\n            </Text>\n          ) : null}\n        </View>\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  background: {\n    top: 0,\n    left: 0,\n    zIndex: 9999,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    position: 'absolute',\n    flexDirection: 'column',\n  },\n  image: {\n    width: 120,\n    height: 120,\n    alignSelf: 'center',\n  },\n  overlay: {\n    zIndex: 111,\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    backgroundColor: '#000',\n    opacity: 0.5,\n  },\n  container: {\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    flex: 1,\n  },\n  loading: {\n    color: '#FFFFFF',\n  },\n  loading_bar_container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 999,\n    marginBottom: 20,\n  },\n  text_container: {\n    flex: 1,\n    width,\n    justifyContent: 'center',\n  },\n  blur: {\n    width: '100%',\n    height: '100%',\n  },\n  loading_text: {\n    textAlign: 'center',\n    paddingHorizontal: 15,\n  },\n});\n\nexport default {\n  show(options = {}) {\n    if (instanceLoadingComponent) {\n      instanceLoadingComponent.show(options);\n    }\n  },\n  hide() {\n    if (instanceLoadingComponent) {\n      instanceLoadingComponent.hide();\n    }\n  },\n  onProcess() {\n    if (instanceLoadingComponent) {\n      instanceLoadingComponent.onProcess();\n    }\n  },\n};\n"]}