{"version":3,"sources":["Component.tsx"],"names":["ANIMATION_DURATION","HIDE_DURATION","ERROR_HIDE_DURATION","instanceToastComponent","ToastComponent","React","PureComponent","undefined","animation","Animated","Value","show","component","props","containerStyle","barHeight","componentDidMount","theme","toastTypes","key","color","colors","white","backgroundColor","primary","success","error","componentWillUnmount","timeout","clearTimeout","queue","push","process","clear","hide","errorDuration","duration","defaultDuration","animationDuration","defaultAnimationDuration","state","item","shift","containerProps","setValue","toastStyle","find","typeItem","type","setState","styles","text_default","timing","easing","Easing","bezier","toValue","useNativeDriver","start","setTimeout","callback","inOut","ease","getAnimationValue","value","interpolate","inputRange","outputRange","transform","translateY","render","container","StyleSheet","create","width","position","display","justifyContent","alignItems","zIndex","paddingVertical","paddingHorizontal","text_type_error","modalOptions","overlayOptions","isShow"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Easing,\n  Animated,\n  ViewStyle,\n  StyleProp,\n  StyleSheet,\n} from 'react-native';\nimport { Text } from '../../..';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport type { ThemeProps } from '../../../theme';\n\nconst ANIMATION_DURATION = 1000;\nconst HIDE_DURATION = 3000;\nconst ERROR_HIDE_DURATION = 4000;\n\nlet instanceToastComponent: any = null;\n\ninterface ToastType {\n  key: string;\n  color?: string;\n  backgroundColor?: string;\n}\nexport type ToastProps = {\n  animationDuration?: number;\n  duration?: number;\n  errorDuration?: number;\n  toastTypes?: Array<ToastType>;\n};\ntype ToastState = {\n  animation: Animated.Value;\n  show: boolean;\n  component?: React.ReactNode;\n  props: any;\n  containerStyle?: StyleProp<ViewStyle>;\n};\n\nexport class ToastComponent extends React.PureComponent<\n  ToastProps & Partial<ThemeProps<ToastProps>>,\n  ToastState\n> {\n  static displayName = 'Toast';\n\n  timeout?: any = undefined;\n  queue: Array<any> = [];\n  toastTypes?: Array<ToastType> = undefined;\n\n  public static defaultProps = {\n    animationDuration: ANIMATION_DURATION,\n    duration: HIDE_DURATION,\n    errorDuration: ERROR_HIDE_DURATION,\n    toastTypes: null,\n  };\n\n  state = {\n    animation: new Animated.Value(1),\n    show: false,\n    component: undefined,\n    props: {},\n    containerStyle: undefined,\n    barHeight: 0,\n  };\n\n  componentDidMount() {\n    const { theme, toastTypes } = this.props;\n    // eslint-disable-next-line consistent-this\n    instanceToastComponent = this;\n    if (toastTypes) {\n      this.toastTypes = toastTypes;\n    } else {\n      this.toastTypes = [\n        {\n          key: 'default',\n          color: theme?.colors?.white,\n          backgroundColor: theme?.colors?.primary,\n        },\n        {\n          key: 'success',\n          color: theme?.colors?.white,\n          backgroundColor: theme?.colors?.success,\n        },\n        {\n          key: 'error',\n          color: theme?.colors?.white,\n          backgroundColor: theme?.colors?.error,\n        },\n      ];\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n    instanceToastComponent = null;\n  }\n\n  show(component: string | React.ReactNode, props = {}) {\n    this.queue.push({ component, props });\n    this.process();\n  }\n\n  clear() {\n    this.hide(() => {\n      this.queue = [];\n    });\n  }\n\n  process() {\n    const {\n      theme,\n      errorDuration,\n      duration: defaultDuration,\n      animationDuration: defaultAnimationDuration,\n    } = this.props;\n    const { animation, show } = this.state;\n    if (show) {\n      return;\n    }\n    const item = this.queue.shift();\n    if (!item || typeof item !== 'object') {\n      return;\n    }\n    const { component, props = {} } = item;\n    const { animationDuration, duration, containerStyle, ...containerProps } =\n      props;\n    animation.setValue(0);\n\n    const toastStyle = this.toastTypes\n      ? this.toastTypes.find(\n          (typeItem: ToastType) =>\n            typeItem.key === (containerProps.type || 'default')\n        )\n      : { color: theme?.colors?.white };\n    this.setState(\n      {\n        show: true,\n        containerStyle,\n        props: containerProps,\n        component:\n          typeof component === 'string' ? (\n            <Text\n              theme={theme}\n              style={[\n                styles.text_default,\n                {\n                  color: toastStyle?.color,\n                },\n              ]}\n            >\n              {component}\n            </Text>\n          ) : (\n            component\n          ),\n      },\n      () => {\n        Animated.timing(animation, {\n          easing: Easing.bezier(0.04, 0.9, 0.11, 0.9),\n          duration: animationDuration || defaultAnimationDuration,\n          toValue: 1,\n          useNativeDriver: true,\n        }).start(() => {\n          this.timeout = setTimeout(() => {\n            this.hide();\n          }, duration || (containerProps.type === 'error' ? errorDuration : defaultDuration));\n        });\n      }\n    );\n  }\n\n  hide(callback?: () => void) {\n    const { show, animation } = this.state;\n    if (show) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n      Animated.timing(animation, {\n        easing: Easing.inOut(Easing.ease),\n        duration: ANIMATION_DURATION,\n        toValue: 0,\n        useNativeDriver: true,\n      }).start(() => {\n        if (callback) {\n          callback();\n        }\n        this.setState(\n          {\n            show: false,\n            props: {},\n            containerStyle: {},\n          },\n          () => {\n            this.process();\n          }\n        );\n      });\n    }\n  }\n\n  getAnimationValue() {\n    const { animation } = this.state;\n    const value = animation.interpolate({\n      inputRange: [0, 1],\n      outputRange: [-60, 0],\n    });\n    return {\n      transform: [\n        {\n          translateY: value,\n        },\n      ],\n    };\n  }\n\n  render() {\n    const { theme } = this.props;\n    const { component, show, containerStyle } = this.state;\n    const props: any = this.state.props;\n    if (!component || !show || !props) {\n      return null;\n    }\n    const toastStyle = this.toastTypes\n      ? this.toastTypes.find(\n          (item: ToastType) => item.key === (props.type || 'default')\n        )\n      : { backgroundColor: theme?.colors?.success };\n\n    return (\n      <Animated.View\n        style={[\n          styles.container,\n          containerStyle,\n          {\n            backgroundColor: toastStyle?.backgroundColor,\n          },\n          { ...this.getAnimationValue() },\n        ]}\n        {...props}\n      >\n        <SafeAreaView edges={['top']}>{component}</SafeAreaView>\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    position: 'absolute',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 9,\n  },\n  text_default: {\n    color: '#FFFFFF',\n    paddingVertical: 5,\n    paddingHorizontal: 5,\n  },\n  text_type_error: {\n    color: '#FFFFFF',\n  },\n});\n\nexport default {\n  show(\n    component: React.ReactNode,\n    modalOptions: any = {},\n    overlayOptions: any = {}\n  ) {\n    instanceToastComponent &&\n      instanceToastComponent.show(component, modalOptions, overlayOptions);\n  },\n  success(\n    component: React.ReactNode,\n    modalOptions: any = { type: 'success' },\n    overlayOptions: any = {}\n  ) {\n    instanceToastComponent &&\n      instanceToastComponent.show(component, modalOptions, overlayOptions);\n  },\n  error(\n    component: React.ReactNode,\n    modalOptions: any = { type: 'error' },\n    overlayOptions: any = {}\n  ) {\n    instanceToastComponent &&\n      instanceToastComponent.show(component, modalOptions, overlayOptions);\n  },\n  hide(callback: () => void = () => {}) {\n    instanceToastComponent && instanceToastComponent.hide(callback);\n  },\n  isShow() {\n    return instanceToastComponent.isShow();\n  },\n};\n"]}