{"version":3,"sources":["Component.tsx"],"names":["width","height","Dimensions","get","instanceModalComponent","DEFAULT_STATES","show","overlayOptions","component","touchOutSideToHide","disableAnimation","backButtonClose","animationName","ModalComponent","React","PureComponent","animation","Animated","Value","state","callback","setState","undefined","BackHandler","removeEventListener","onBack","hide","modalOptions","addEventListener","setValue","timing","toValue","easing","Easing","elastic","duration","useNativeDriver","start","styles","overlay","style","transform","translateY","interpolate","inputRange","outputRange","scale","componentDidMount","componentWillUnmount","render","container","renderBackground","form_container","getAnimationStyles","handleTouchOutSide","outside","StyleSheet","create","zIndex","position","alignItems","justifyContent","right","bottom","top","left","opacity","backgroundColor","overlay_blur","modalWrapper","borderRadius","marginHorizontal","modal_body","paddingVertical","buttonCancelWrapper","paddingBottom","modal_footer","marginTop","modal_header","borderTopLeftRadius","borderTopRightRadius","overflow","blur","transparent","isShow","canBack"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  View,\n  Easing,\n  Animated,\n  StyleSheet,\n  Dimensions,\n  BackHandler,\n  TouchableOpacity,\n} from 'react-native';\nimport type { ThemeProps } from '../../../theme';\n\nconst { width, height } = Dimensions.get('window');\n\nlet instanceModalComponent: any = null;\nconst DEFAULT_STATES = {\n  show: false,\n  overlayOptions: {},\n  component: null,\n  touchOutSideToHide: true,\n  disableAnimation: false,\n  backButtonClose: false,\n  animationName: '',\n};\n\nexport type ModalProps = {\n  local?: boolean;\n};\n\ntype ModalState = {\n  animation: Animated.Value;\n  component: React.ReactNode;\n  show: boolean;\n  callback?: () => void;\n  overlayOptions: any;\n  touchOutSideToHide: boolean;\n  disableAnimation: boolean;\n  backButtonClose: boolean;\n  animationName: string;\n};\n\nexport class ModalComponent extends React.PureComponent<\n  ModalProps & Partial<ThemeProps<ModalProps>>,\n  ModalState\n> {\n  static displayName = 'Modal';\n\n  public static defaultProps = {};\n\n  state = {\n    animation: new Animated.Value(1),\n    ...DEFAULT_STATES,\n  };\n\n  componentDidMount() {\n    instanceModalComponent = this;\n  }\n\n  componentWillUnmount() {\n    instanceModalComponent = null;\n  }\n\n  isShow = () => {\n    return this.state.show;\n  };\n\n  canBack = () => {\n    return this.state.backButtonClose;\n  };\n\n  hide = (callback?: () => void) => {\n    this.setState({\n      show: false,\n      callback: undefined,\n      component: null,\n    });\n    if (typeof callback === 'function') {\n      callback();\n    }\n  };\n\n  onBack = () => {\n    BackHandler.removeEventListener('hardwareBackPress', this.onBack);\n    if (this.state.backButtonClose) {\n      this.hide();\n      return false;\n    }\n    return true;\n  };\n\n  show = (\n    component: React.ReactNode,\n    modalOptions: any,\n    overlayOptions: any\n  ) => {\n    const { animation } = this.state;\n    const {\n      touchOutSideToHide,\n      backButtonClose,\n      disableAnimation,\n      animationName,\n    } = modalOptions;\n    BackHandler.addEventListener('hardwareBackPress', this.onBack);\n    this.setState(\n      {\n        show: true,\n        animation,\n        overlayOptions,\n        component,\n        touchOutSideToHide: touchOutSideToHide || true,\n        disableAnimation,\n        backButtonClose,\n        animationName,\n      },\n      () => {\n        animation.setValue(0.8);\n        Animated.timing(animation, {\n          toValue: 1,\n          easing: Easing.elastic(2),\n          duration: 450,\n          useNativeDriver: true,\n        }).start();\n      }\n    );\n  };\n\n  handleTouchOutSide = () => {\n    const { touchOutSideToHide } = this.state;\n    if (touchOutSideToHide) {\n      this.hide();\n    }\n  };\n\n  renderBackground = () => {\n    const overlayOptions: any = this.state.overlayOptions;\n\n    return (\n      <TouchableOpacity\n        activeOpacity={0.98}\n        key=\"overlay\"\n        style={[styles.overlay, overlayOptions.style]}\n      />\n    );\n  };\n\n  getAnimationStyles = () => {\n    const { disableAnimation, animationName, animation } = this.state;\n\n    if (disableAnimation) {\n      return {};\n    }\n    switch (animationName) {\n      case 'slideUp':\n        return {\n          transform: [\n            {\n              translateY: animation.interpolate({\n                inputRange: [0, 1],\n                outputRange: [100, 0],\n              }),\n            },\n          ],\n        };\n      default:\n        return {\n          transform: [{ scale: animation }],\n        };\n    }\n  };\n\n  render() {\n    const { show, touchOutSideToHide, component } = this.state;\n    if (!show) {\n      return null;\n    }\n\n    return (\n      <View key=\"main\" style={styles.container}>\n        {this.renderBackground()}\n        <Animated.View\n          style={[styles.form_container, this.getAnimationStyles()]}\n        >\n          {touchOutSideToHide ? (\n            <TouchableOpacity\n              activeOpacity={0.98}\n              onPress={this.handleTouchOutSide}\n              style={styles.outside}\n            />\n          ) : null}\n          {component}\n        </Animated.View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    zIndex: 998,\n    position: 'absolute',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: height,\n  },\n  form_container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'absolute',\n    right: 0,\n    bottom: 0,\n    top: 0,\n    left: 0,\n    zIndex: 9999,\n  },\n  overlay: {\n    opacity: 0.3,\n    backgroundColor: '#000',\n    position: 'absolute',\n    width,\n    height: height,\n    left: 0,\n    top: 0,\n  },\n  overlay_blur: {\n    zIndex: 1,\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    left: 0,\n    top: 0,\n  },\n  modalWrapper: {\n    borderRadius: 8,\n    marginHorizontal: 24,\n    height: '70%',\n  },\n  modal_body: {\n    paddingVertical: 24,\n  },\n  buttonCancelWrapper: {\n    paddingBottom: 24,\n  },\n  modal_footer: {\n    marginTop: 10,\n  },\n  modal_header: {\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    overflow: 'hidden',\n  },\n  blur: {\n    width: '100%',\n    height: '100%',\n  },\n  outside: {\n    position: 'absolute',\n    backgroundColor: 'transparent',\n    width: '100%',\n    height: '100%',\n  },\n  transparent: {\n    backgroundColor: 'transparent',\n  },\n});\n\nexport default {\n  show(\n    component: React.ReactNode,\n    modalOptions: any = {},\n    overlayOptions: any = {}\n  ) {\n    instanceModalComponent &&\n      instanceModalComponent.show(component, modalOptions, overlayOptions);\n  },\n  hide(callback: () => void = () => {}) {\n    instanceModalComponent && instanceModalComponent.hide(callback);\n  },\n  isShow() {\n    return instanceModalComponent.isShow();\n  },\n  canBack() {\n    return instanceModalComponent.canBack();\n  },\n};\n"]}