{"version":3,"sources":["Component.tsx"],"names":["React","View","Easing","Animated","StyleSheet","Dimensions","ActivityIndicator","Text","width","get","instanceLoadingComponent","DEFAULT_STATES","title","isShow","overlayProps","overlayStyles","showLoadingIcon","animationIconOnly","CommonLoadingComponent","Component","animation","Value","componentDidMount","componentWillUnmount","onProcess","state","getAnimationStyle","value","interpolate","inputRange","outputRange","valueFade","opacity","transform","scale","runAnimation","options","callback","duration","fromValue","toValue","setValue","timing","useNativeDriver","easing","elastic","start","show","animations","setState","hide","renderBackground","styles","overlay","render","theme","loadingColor","loadingSize","props","background","loading_bar_container","image","loading_text","create","top","left","zIndex","height","overflow","position","flexDirection","alignSelf","backgroundColor","container","flex","loading","color","display","justifyContent","alignItems","marginBottom","text_container","blur","textAlign","paddingHorizontal"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  View,\n  Easing,\n  Animated,\n  StyleSheet,\n  Dimensions,\n  ActivityIndicator,\n} from 'react-native';\nimport Text from '../../atoms/Text/ThemedComponent';\nimport type { ThemeProps } from '../../../theme';\n\nconst { width } = Dimensions.get('window');\n\nlet instanceLoadingComponent: any = null;\nconst DEFAULT_STATES = {\n  title: '',\n  isShow: false,\n  overlayProps: {},\n  overlayStyles: {},\n  showLoadingIcon: true,\n  animationIconOnly: false,\n};\n\nexport type CommonLoadingProps = {\n  loadingSize?: 'small' | 'large';\n  loadingColor?: string;\n};\ntype CommonLoadingState = {\n  animation: Animated.Value;\n  title: string;\n  isShow: boolean;\n  overlayProps: any;\n  overlayStyles: any;\n  showLoadingIcon: boolean;\n  animationIconOnly: boolean;\n};\n\nexport class CommonLoadingComponent extends React.Component<\n  CommonLoadingProps & Partial<ThemeProps<CommonLoadingProps>>,\n  CommonLoadingState\n> {\n  static displayName = 'CommonLoading';\n\n  public static defaultProps = {\n    loadingSize: 'large',\n  };\n\n  state = {\n    animation: new Animated.Value(1),\n    ...DEFAULT_STATES,\n  };\n\n  componentDidMount() {\n    instanceLoadingComponent = this;\n  }\n\n  componentWillUnmount() {\n    instanceLoadingComponent = null;\n  }\n\n  onProcess() {\n    const { isShow } = this.state;\n    return isShow;\n  }\n\n  getAnimationStyle() {\n    const { animation } = this.state;\n    const value = animation.interpolate({\n      inputRange: [0, 1],\n      outputRange: [0.6, 1],\n    });\n    const valueFade = animation.interpolate({\n      inputRange: [0, 1],\n      outputRange: [0, 1],\n    });\n    return {\n      opacity: valueFade,\n      transform: [\n        {\n          scale: value,\n        },\n      ],\n    };\n  }\n\n  runAnimation(options: any, callback?: Animated.EndCallback) {\n    const { animation } = this.state;\n    const { duration, fromValue, toValue } = options;\n    animation.setValue(fromValue || 0);\n    return Animated.timing(animation, {\n      toValue: toValue || 1,\n      useNativeDriver: true,\n      duration: duration || 150,\n      easing: Easing.elastic(1),\n    }).start(callback);\n  }\n\n  show({\n    showLoadingIcon = true,\n    overlayProps = {},\n    overlayStyles = {},\n    animation = true,\n    animations = {},\n    animationIconOnly = true,\n    title = '',\n  }) {\n    this.setState(\n      {\n        title,\n        isShow: true,\n        overlayProps,\n        overlayStyles,\n        showLoadingIcon,\n        animationIconOnly,\n      },\n      () => {\n        if (animation) {\n          this.runAnimation(animations);\n        }\n      }\n    );\n  }\n\n  hide() {\n    const { animation } = this.state;\n    animation.setValue(0);\n    this.setState({\n      ...DEFAULT_STATES,\n    });\n  }\n\n  renderBackground() {\n    const { isShow, overlayStyles, overlayProps } = this.state;\n\n    return isShow ? (\n      <View style={[styles.overlay, overlayStyles]} {...overlayProps} />\n    ) : null;\n  }\n\n  render() {\n    const { title, isShow, showLoadingIcon, animationIconOnly } = this.state;\n    const { theme, loadingColor, loadingSize } = this.props;\n    if (!isShow) {\n      return null;\n    }\n    return (\n      <Animated.View\n        style={[\n          styles.background,\n          !animationIconOnly ? this.getAnimationStyle() : {},\n        ]}\n      >\n        {this.renderBackground()}\n        <View style={styles.loading_bar_container}>\n          {showLoadingIcon ? (\n            <Animated.View\n              style={[\n                styles.image,\n                animationIconOnly ? this.getAnimationStyle() : {},\n              ]}\n            >\n              <ActivityIndicator\n                color={loadingColor}\n                style={styles.image}\n                size={loadingSize}\n              />\n            </Animated.View>\n          ) : null}\n          {title ? (\n            <Text theme={theme} style={styles.loading_text}>\n              {title}\n            </Text>\n          ) : null}\n        </View>\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  background: {\n    top: 0,\n    left: 0,\n    zIndex: 9999,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    position: 'absolute',\n    flexDirection: 'column',\n  },\n  image: {\n    width: 120,\n    height: 120,\n    alignSelf: 'center',\n  },\n  overlay: {\n    zIndex: 111,\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    backgroundColor: '#000',\n    opacity: 0.5,\n  },\n  container: {\n    height: '100%',\n    width: '100%',\n    position: 'absolute',\n    flex: 1,\n  },\n  loading: {\n    color: '#FFFFFF',\n  },\n  loading_bar_container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 999,\n    marginBottom: 20,\n  },\n  text_container: {\n    flex: 1,\n    width,\n    justifyContent: 'center',\n  },\n  blur: {\n    width: '100%',\n    height: '100%',\n  },\n  loading_text: {\n    textAlign: 'center',\n    paddingHorizontal: 15,\n  },\n});\n\nexport default {\n  show(options = {}) {\n    if (instanceLoadingComponent) {\n      instanceLoadingComponent.show(options);\n    }\n  },\n  hide() {\n    if (instanceLoadingComponent) {\n      instanceLoadingComponent.hide();\n    }\n  },\n  onProcess() {\n    if (instanceLoadingComponent) {\n      instanceLoadingComponent.onProcess();\n    }\n  },\n};\n"]}