{"version":3,"sources":["Component.tsx"],"names":["React","View","Easing","Animated","StyleSheet","Dimensions","BackHandler","TouchableOpacity","width","height","get","instanceModalComponent","DEFAULT_STATES","show","overlayOptions","component","touchOutSideToHide","disableAnimation","backButtonClose","animationName","ModalComponent","PureComponent","animation","Value","state","callback","setState","undefined","removeEventListener","onBack","hide","modalOptions","addEventListener","setValue","timing","toValue","easing","elastic","duration","useNativeDriver","start","styles","overlay","style","transform","translateY","interpolate","inputRange","outputRange","scale","componentDidMount","componentWillUnmount","render","container","renderBackground","form_container","getAnimationStyles","handleTouchOutSide","outside","create","zIndex","position","alignItems","justifyContent","right","bottom","top","left","opacity","backgroundColor","overlay_blur","modalWrapper","borderRadius","marginHorizontal","modal_body","paddingVertical","buttonCancelWrapper","paddingBottom","modal_footer","marginTop","modal_header","borderTopLeftRadius","borderTopRightRadius","overflow","blur","transparent","isShow","canBack"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  View,\n  Easing,\n  Animated,\n  StyleSheet,\n  Dimensions,\n  BackHandler,\n  TouchableOpacity,\n} from 'react-native';\nimport type { ThemeProps } from '../../../theme';\n\nconst { width, height } = Dimensions.get('window');\n\nlet instanceModalComponent: any = null;\nconst DEFAULT_STATES = {\n  show: false,\n  overlayOptions: {},\n  component: null,\n  touchOutSideToHide: true,\n  disableAnimation: false,\n  backButtonClose: false,\n  animationName: '',\n};\n\nexport type ModalProps = {\n  local?: boolean;\n};\n\ntype ModalState = {\n  animation: Animated.Value;\n  component: React.ReactNode;\n  show: boolean;\n  callback?: () => void;\n  overlayOptions: any;\n  touchOutSideToHide: boolean;\n  disableAnimation: boolean;\n  backButtonClose: boolean;\n  animationName: string;\n};\n\nexport class ModalComponent extends React.PureComponent<\n  ModalProps & Partial<ThemeProps<ModalProps>>,\n  ModalState\n> {\n  static displayName = 'Modal';\n\n  public static defaultProps = {};\n\n  state = {\n    animation: new Animated.Value(1),\n    ...DEFAULT_STATES,\n  };\n\n  componentDidMount() {\n    instanceModalComponent = this;\n  }\n\n  componentWillUnmount() {\n    instanceModalComponent = null;\n  }\n\n  isShow = () => {\n    return this.state.show;\n  };\n\n  canBack = () => {\n    return this.state.backButtonClose;\n  };\n\n  hide = (callback?: () => void) => {\n    this.setState({\n      show: false,\n      callback: undefined,\n      component: null,\n    });\n    if (typeof callback === 'function') {\n      callback();\n    }\n  };\n\n  onBack = () => {\n    BackHandler.removeEventListener('hardwareBackPress', this.onBack);\n    if (this.state.backButtonClose) {\n      this.hide();\n      return false;\n    }\n    return true;\n  };\n\n  show = (\n    component: React.ReactNode,\n    modalOptions: any,\n    overlayOptions: any\n  ) => {\n    const { animation } = this.state;\n    const {\n      touchOutSideToHide,\n      backButtonClose,\n      disableAnimation,\n      animationName,\n    } = modalOptions;\n    BackHandler.addEventListener('hardwareBackPress', this.onBack);\n    this.setState(\n      {\n        show: true,\n        animation,\n        overlayOptions,\n        component,\n        touchOutSideToHide: touchOutSideToHide || true,\n        disableAnimation,\n        backButtonClose,\n        animationName,\n      },\n      () => {\n        animation.setValue(0.8);\n        Animated.timing(animation, {\n          toValue: 1,\n          easing: Easing.elastic(2),\n          duration: 450,\n          useNativeDriver: true,\n        }).start();\n      }\n    );\n  };\n\n  handleTouchOutSide = () => {\n    const { touchOutSideToHide } = this.state;\n    if (touchOutSideToHide) {\n      this.hide();\n    }\n  };\n\n  renderBackground = () => {\n    const overlayOptions: any = this.state.overlayOptions;\n\n    return (\n      <TouchableOpacity\n        activeOpacity={0.98}\n        key=\"overlay\"\n        style={[styles.overlay, overlayOptions.style]}\n      />\n    );\n  };\n\n  getAnimationStyles = () => {\n    const { disableAnimation, animationName, animation } = this.state;\n\n    if (disableAnimation) {\n      return {};\n    }\n    switch (animationName) {\n      case 'slideUp':\n        return {\n          transform: [\n            {\n              translateY: animation.interpolate({\n                inputRange: [0, 1],\n                outputRange: [100, 0],\n              }),\n            },\n          ],\n        };\n      default:\n        return {\n          transform: [{ scale: animation }],\n        };\n    }\n  };\n\n  render() {\n    const { show, touchOutSideToHide, component } = this.state;\n    if (!show) {\n      return null;\n    }\n\n    return (\n      <View key=\"main\" style={styles.container}>\n        {this.renderBackground()}\n        <Animated.View\n          style={[styles.form_container, this.getAnimationStyles()]}\n        >\n          {touchOutSideToHide ? (\n            <TouchableOpacity\n              activeOpacity={0.98}\n              onPress={this.handleTouchOutSide}\n              style={styles.outside}\n            />\n          ) : null}\n          {component}\n        </Animated.View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    zIndex: 998,\n    position: 'absolute',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    height: height,\n  },\n  form_container: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'absolute',\n    right: 0,\n    bottom: 0,\n    top: 0,\n    left: 0,\n    zIndex: 9999,\n  },\n  overlay: {\n    opacity: 0.3,\n    backgroundColor: '#000',\n    position: 'absolute',\n    width,\n    height: height,\n    left: 0,\n    top: 0,\n  },\n  overlay_blur: {\n    zIndex: 1,\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    left: 0,\n    top: 0,\n  },\n  modalWrapper: {\n    borderRadius: 8,\n    marginHorizontal: 24,\n    height: '70%',\n  },\n  modal_body: {\n    paddingVertical: 24,\n  },\n  buttonCancelWrapper: {\n    paddingBottom: 24,\n  },\n  modal_footer: {\n    marginTop: 10,\n  },\n  modal_header: {\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    overflow: 'hidden',\n  },\n  blur: {\n    width: '100%',\n    height: '100%',\n  },\n  outside: {\n    position: 'absolute',\n    backgroundColor: 'transparent',\n    width: '100%',\n    height: '100%',\n  },\n  transparent: {\n    backgroundColor: 'transparent',\n  },\n});\n\nexport default {\n  show(\n    component: React.ReactNode,\n    modalOptions: any = {},\n    overlayOptions: any = {}\n  ) {\n    instanceModalComponent &&\n      instanceModalComponent.show(component, modalOptions, overlayOptions);\n  },\n  hide(callback: () => void = () => {}) {\n    instanceModalComponent && instanceModalComponent.hide(callback);\n  },\n  isShow() {\n    return instanceModalComponent.isShow();\n  },\n  canBack() {\n    return instanceModalComponent.canBack();\n  },\n};\n"]}