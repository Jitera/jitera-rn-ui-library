{"version":3,"sources":["withTheme.tsx"],"names":["React","deepmerge","hoistNonReactStatics","ThemeConsumer","DefaultTheme","isClassComponent","Component","Boolean","prototype","isReactComponent","ThemedComponent","WrappedComponent","themeKey","displayName","Object","assign","props","forwardedRef","children","rest","context","newProps","theme","updateTheme","replaceTheme","clone","withTheme","name","forwardRef"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,oBAAP,MAAiC,yBAAjC;AACA,SAASC,aAAT,QAA0C,iBAA1C;AACA,OAAOC,YAAP,MAAwC,SAAxC;;AAEA,MAAMC,gBAAgB,GAAIC,SAAD,IACvBC,OAAO,CAACD,SAAS,CAACE,SAAV,IAAuBF,SAAS,CAACE,SAAV,CAAoBC,gBAA5C,CADT;;AAOA,MAAMC,eAAe,GAAG,CACtBC,gBADsB,EAEtBC,QAFsB,EAGtBC,WAHsB,KAInB;AACH,SAAOC,MAAM,CAACC,MAAP,CACL,CAACC,KAAD,EAAaC,YAAb,KAAmC;AACjC,UAAM;AAAEC,MAAAA,QAAF;AAAY,SAAGC;AAAf,QAAwBH,KAA9B;AAEA,wBACE,oBAAC,aAAD,QACII,OAAD,IAAa;AACZ;AACA,UAAI,CAACA,OAAL,EAAc;AACZ,cAAMC,QAAQ,GAAG,EAAE,GAAGF,IAAL;AAAWG,UAAAA,KAAK,EAAElB,YAAlB;AAAgCc,UAAAA;AAAhC,SAAjB;AACA,eAAOb,gBAAgB,CAACM,gBAAD,CAAhB,gBACL,oBAAC,gBAAD;AAAkB,UAAA,GAAG,EAAEM;AAAvB,WAAyCI,QAAzC,EADK,gBAGL,oBAAC,gBAAD,EAAsBA,QAAtB,CAHF;AAKD;;AACD,YAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA,WAAT;AAAsBC,QAAAA;AAAtB,UAAuCJ,OAA7C;AACA,YAAMC,QAAQ,GAAG;AACfC,QAAAA,KADe;AAEfC,QAAAA,WAFe;AAGfC,QAAAA,YAHe;AAIf,WAAGvB,SAAS,CACTW,QAAQ,IACNU,KAAK,CACJV,QADI,CADR,IAIE,EALQ,EAMVO,IANU,EAOV;AACEM,UAAAA,KAAK,EAAE;AADT,SAPU,CAJG;AAefP,QAAAA;AAfe,OAAjB;;AAiBA,UAAIb,gBAAgB,CAACM,gBAAD,CAApB,EAAwC;AACtC,4BAAO,oBAAC,gBAAD;AAAkB,UAAA,GAAG,EAAEM;AAAvB,WAAyCI,QAAzC,EAAP;AACD;;AACD,0BAAO,oBAAC,gBAAD,EAAsBA,QAAtB,CAAP;AACD,KAjCH,CADF;AAqCD,GAzCI,EA0CL;AAAER,IAAAA,WAAW,EAAEA;AAAf,GA1CK,CAAP;AA4CD,CAjDD;;AAmDA,SAASa,SAAT,CACEf,gBADF,EAEEC,QAFF,EAKuC;AACrC,QAAMe,IAAI,GAAGf,QAAQ,GAChB,UAASA,QAAS,EADF,GAEhB,UACCD,gBAAgB,CAACE,WAAjB,IAAgCF,gBAAgB,CAACgB,IAAjD,IAAyD,WAC1D,EAJL;AAKA,QAAMrB,SAAS,GAAGI,eAAe,CAACC,gBAAD,EAAmBC,QAAnB,EAA6Be,IAA7B,CAAjC;;AAEA,MAAItB,gBAAgB,CAACM,gBAAD,CAApB,EAAwC;AACtC,WAAOT,oBAAoB,eAACF,KAAK,CAAC4B,UAAN,CAAiBtB,SAAjB,CAAD,EAA8BK,gBAA9B,CAA3B;AACD;;AACD,SAAOL,SAAP;AACD;;AAED,eAAeoB,SAAf","sourcesContent":["import React from 'react';\nimport deepmerge from 'deepmerge';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { ThemeConsumer, ThemeProps } from './ThemeProvider';\nimport DefaultTheme, { FullTheme } from './theme';\n\nconst isClassComponent = (Component: any) =>\n  Boolean(Component.prototype && Component.prototype.isReactComponent);\n\nexport interface ThemedComponent {\n  displayName: string;\n}\n\nconst ThemedComponent = (\n  WrappedComponent: any,\n  themeKey?: string,\n  displayName?: string\n) => {\n  return Object.assign(\n    (props: any, forwardedRef: any) => {\n      const { children, ...rest } = props;\n\n      return (\n        <ThemeConsumer>\n          {(context) => {\n            // If user isn't using ThemeProvider\n            if (!context) {\n              const newProps = { ...rest, theme: DefaultTheme, children };\n              return isClassComponent(WrappedComponent) ? (\n                <WrappedComponent ref={forwardedRef} {...newProps} />\n              ) : (\n                <WrappedComponent {...newProps} />\n              );\n            }\n            const { theme, updateTheme, replaceTheme } = context;\n            const newProps = {\n              theme,\n              updateTheme,\n              replaceTheme,\n              ...deepmerge<FullTheme>(\n                (themeKey &&\n                  (theme[\n                    themeKey as keyof Partial<FullTheme>\n                  ] as Partial<FullTheme>)) ||\n                  {},\n                rest,\n                {\n                  clone: false,\n                }\n              ),\n              children,\n            };\n            if (isClassComponent(WrappedComponent)) {\n              return <WrappedComponent ref={forwardedRef} {...newProps} />;\n            }\n            return <WrappedComponent {...newProps} />;\n          }}\n        </ThemeConsumer>\n      );\n    },\n    { displayName: displayName }\n  );\n};\n\nfunction withTheme<P = any, T = any>(\n  WrappedComponent: React.ForwardRefExoticComponent<P & Partial<ThemeProps<T>>> | React.FC<P & Partial<ThemeProps<T>>>,\n  themeKey: string\n):\n  | React.FunctionComponent<Omit<P, keyof ThemeProps<T>>>\n  | React.ForwardRefExoticComponent<P> {\n  const name = themeKey\n    ? `Themed.${themeKey}`\n    : `Themed.${\n        WrappedComponent.displayName || WrappedComponent.name || 'Component'\n      }`;\n  const Component = ThemedComponent(WrappedComponent, themeKey, name);\n\n  if (isClassComponent(WrappedComponent)) {\n    return hoistNonReactStatics(React.forwardRef(Component), WrappedComponent);\n  }\n  return Component;\n}\n\nexport default withTheme;\n"]}